<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cl.dao.SysOrgMapper">

  <select id="selectRoleIdListByOrgId" parameterType="long" resultType="long">
    SELECT
      id
    FROM
      sys_role
    WHERE
      org_id = #{orgId}
    AND
      status = 1
  </select>

  <select id="selectUserIdListByRoleId" resultType="long">
    SELECT
      user_id
    FROM
      sys_user_role
    WHERE
      status = 1
    AND
      role_id IN
    <foreach collection="roleIdList" item="roleId" open="(" close=")" separator=",">
      #{roleId}
    </foreach>
  </select>

  <update id="deleteUserRole">
    UPDATE
      sys_user_role
    SET
      status = 0
    WHERE
      role_id IN
    <foreach collection="roleIdList" item="roleId" open="(" close=")" separator=",">
      #{roleId}
    </foreach>
  </update>

</mapper>