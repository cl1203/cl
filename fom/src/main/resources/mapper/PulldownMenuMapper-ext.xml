<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cl.dao.PulldownMenuMapper">

    <select id="queryOrgPulldownMenu" resultType="com.cl.bean.res.PulldownMenuResBean" parameterType="com.cl.bean.req.PulldownMenuReqBean">
        SELECT
          id ,
          name
        FROM
          sys_org
        WHERE
          status = 1
        <if test="name != null  and name !='' ">
            AND name = #{name}
        </if>
        <if test="id !=null  ">
            AND id = #{id}
        </if>
    </select>

    <select id="queryUserPulldownMenu" resultType="com.cl.bean.res.PulldownMenuResBean" parameterType="com.cl.bean.req.PulldownMenuReqBean">
        SELECT
        id ,
        user_name name
        FROM
        sys_user
        WHERE
        status = 1
        <if test="name != null  and name !='' ">
            AND user_name = #{name}
        </if>
        <if test="id !=null  ">
            AND id = #{id}
        </if>
    </select>

    <select id="queryPermissionPulldownMenu" resultType="com.cl.bean.res.PulldownMenuResBean" parameterType="com.cl.bean.req.PulldownMenuReqBean">
        SELECT
        id ,
        name name
        FROM
        sys_permission
        WHERE
        status = 1
        <if test="name != null  and name !='' ">
            AND name = #{name}
        </if>
        <if test="id !=null  ">
            AND id = #{id}
        </if>
    </select>

    <select id="queryRolePulldownMenu" resultType="com.cl.bean.res.PulldownMenuResBean" parameterType="com.cl.bean.req.PulldownMenuReqBean">
        SELECT
        id ,
        name name
        FROM
        sys_role
        WHERE
        status = 1
        <if test="name != null  and name !='' ">
            AND name = #{name}
        </if>
        <if test="id !=null  ">
            AND id = #{id}
        </if>
    </select>


    <resultMap id="SingleParamMap" type="com.cl.comm.model.SingleParam">
        <result column="supplier_name" property="param" jdbcType="VARCHAR" />
    </resultMap>
    <select id="queryInputSupplierName" resultMap="SingleParamMap">
        SELECT
        supplier_name
        FROM
        purchase
        WHERE
        purchase_status != 0
        GROUP BY supplier_name
    </select>

    <select id="queryDictItemList" resultType="com.cl.bean.res.DictItem" parameterType="com.cl.bean.res.DictItem">
        SELECT
          scd.code ,
          scd.value
        FROM
          sys_code sc
        LEFT JOIN
          sys_code_detail scd
        ON sc.id = scd.sys_code_id
        WHERE sc.type = #{type}
        <if test="code != null and code !='' ">
            AND scd.code = #{code}
        </if>
        <if test="value != null and value !='' ">
            AND scd.value = #{value}
        </if>
        AND sc.status = 1
        AND scd.status = 1
    </select>
</mapper>