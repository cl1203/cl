<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cl.dao.OrderManageMapper">


  <select id="selectProducer" parameterType="long" resultType="com.cl.entity.OrderManageEntity">
    SELECT
      *
    FROM
    order_manage
    WHERE
    sku = (
    SELECT
    sku
    FROM
    order_manage
    WHERE
    id = #{orderId}
    )
    AND id != #{orderId}
    AND order_time &lt; (
    SELECT
    order_time
    FROM
    order_manage
    WHERE
    id = #{orderId}
    )
    ORDER BY
    order_time DESC
    LIMIT 1
  </select>

  <select id="selectOrderQuantityByOrderNo" parameterType="string" resultType="com.cl.bean.res.OrderQuantityResBean">
    SELECT
      id,
      order_no,
      size_name,
      quantity
    FROM
      order_quantity
    WHERE
      order_no = #{orderNo}
  </select>

  <select id="selectSecondaryProcessByOrderNo" parameterType="string" resultType="com.cl.bean.res.SecondaryProcessResBean">
    SELECT
      sp.id sp_id,
	  sp.order_no order_no,
	  sp.process_name process_name,
	  sp.supplier_name supplier_name,
	  sp.unit_price unit_price,
	  sp.simple_use simple_use
    FROM
      secondary_process sp
    WHERE
      sp.order_no = #{orderNo}
  </select>
</mapper>